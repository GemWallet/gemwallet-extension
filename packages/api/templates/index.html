<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GemWallet API</title>
  </head>

  <body>
    <div id="wrapper">
      <button onclick="handlePayment()">Pay</button>
      <button onclick="handleTrustline()">Add trustline</button>
      <div id="address"></div>
    </div>
  </body>
</html>

<script>
  function handlePayment() {
    GemWalletApi.isConnected()
      .then((isConnected) => {
        if (isConnected) {
          const payment = {
            amount: '0.0020',
            destination: 'rNvFCZXpDtGeQ3bVas95wGLN6N2stGmA9o'
          };
          GemWalletApi.sendPayment(payment)
            .then((trHash) => {
              const addressContainer = document.getElementById('address');
              addressContainer.insertAdjacentText(
                'afterbegin',
                `Transaction sent with ID: ${trHash}`
              );
            })
            .catch((e) => {
              console.error('Cannot proceed the payment: ', e);
            });
        }
      })
      .catch((e) => {
        console.error('GemWallet is not connected: ', e);
      });
  }
  function handleTrustline() {
    GemWalletApi.isConnected()
      .then((isConnected) => {
        if (isConnected) {
          const transaction = {
            currency: 'USD',
            issuer: 'rwtDvu9QDfCskWuyE2TSEt3s56RbiWUKJN',
            value: '20'
          };
          GemWalletApi.addTrustline(transaction)
            .then((trHash) => {
              const addressContainer = document.getElementById('address');
              addressContainer.insertAdjacentText(
                'afterbegin',
                `Transaction sent with ID: ${trHash}`
              );
            })
            .catch((e) => {
              console.error('Cannot proceed the transaction: ', e);
            });
        }
      })
      .catch((e) => {
        console.error('GemWallet is not connected: ', e);
      });
  }
</script>
